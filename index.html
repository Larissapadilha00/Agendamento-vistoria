async function book() {
    const nome = document.getElementById('nome').value.trim();
    const empreendimento = document.getElementById('empreendimento').value.trim();
    const local = document.getElementById('local').value.trim();

    if (!nome || !empreendimento || !local) {
        alert('Preencha todos os campos!');
        return;
    }

    const data = {
        colaborador: selectedCollaborator,
        data: selectedDate,
        hora: selectedHour,
        nome,
        empreendimento,
        local
    };

    try {
        const res = await fetch(apiUrl, {
            method: "POST",
            body: JSON.stringify(data),
            headers: { "Content-Type": "application/json" }
        });

        const resultText = await res.text();
        const result = JSON.parse(resultText);

        if (result.result === "Sucesso") {
            alert("Agendado com sucesso!");
        } else {
            alert("Erro ao agendar: " + (result.error || ''));
        }
    } catch (error) {
        alert("Erro ao enviar para o banco de dados.");
        console.error(error);
    }

    document.getElementById('form').style.display = 'none';
    document.getElementById('nome').value = '';
    document.getElementById('empreendimento').value = '';
    document.getElementById('local').value = '';

    clearScreens();
    document.getElementById('selector').classList.remove('hidden');
}
